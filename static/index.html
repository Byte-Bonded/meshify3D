<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Meshify3D - 2D to 3D Conversion</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            min-height: 100vh;
            color: #fff;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Header */
        header {
            text-align: center;
            padding: 40px 0;
        }

        .logo {
            font-size: 3rem;
            font-weight: bold;
            background: linear-gradient(90deg, #00d9ff, #00ff88);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 10px;
        }

        .tagline {
            color: #a0a0a0;
            font-size: 1.1rem;
        }

        /* Main Content */
        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-top: 30px;
        }

        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
            }
        }

        /* Upload Section */
        .upload-section {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 20px;
            padding: 30px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
        }

        .section-title {
            font-size: 1.5rem;
            margin-bottom: 20px;
            color: #00d9ff;
        }

        .upload-area {
            border: 2px dashed rgba(0, 217, 255, 0.5);
            border-radius: 15px;
            padding: 50px 30px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            background: rgba(0, 217, 255, 0.02);
        }

        .upload-area:hover {
            border-color: #00d9ff;
            background: rgba(0, 217, 255, 0.08);
        }

        .upload-area.dragover {
            border-color: #00ff88;
            background: rgba(0, 255, 136, 0.1);
        }

        .upload-icon {
            font-size: 4rem;
            margin-bottom: 15px;
        }

        .upload-text {
            font-size: 1.1rem;
            color: #ccc;
            margin-bottom: 10px;
        }

        .upload-hint {
            font-size: 0.9rem;
            color: #888;
        }

        #fileInput {
            display: none;
        }

        /* Preview Area */
        .preview-container {
            margin-top: 20px;
            display: none;
        }

        .preview-container.active {
            display: block;
        }

        .preview-image {
            width: 100%;
            max-height: 300px;
            object-fit: contain;
            border-radius: 10px;
            margin-bottom: 15px;
        }

        .file-info {
            background: rgba(0, 0, 0, 0.3);
            padding: 15px;
            border-radius: 10px;
            font-size: 0.9rem;
        }

        .file-info p {
            margin: 5px 0;
            color: #aaa;
        }

        .file-info span {
            color: #00ff88;
        }

        /* Generate Button */
        .generate-btn {
            width: 100%;
            padding: 18px 30px;
            margin-top: 25px;
            font-size: 1.2rem;
            font-weight: bold;
            color: #fff;
            background: linear-gradient(90deg, #00d9ff, #00ff88);
            border: none;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .generate-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(0, 217, 255, 0.3);
        }

        .generate-btn:disabled {
            background: #444;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        /* Output Section */
        .output-section {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 20px;
            padding: 30px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
        }

        .viewer-container {
            background: rgba(0, 0, 0, 0.4);
            border-radius: 15px;
            height: 400px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }

        .placeholder-text {
            text-align: center;
            color: #666;
        }

        .placeholder-text .icon {
            font-size: 5rem;
            margin-bottom: 15px;
            opacity: 0.5;
        }

        /* Progress Bar */
        .progress-container {
            display: none;
            margin-top: 20px;
        }

        .progress-container.active {
            display: block;
        }

        .progress-bar {
            height: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #00d9ff, #00ff88);
            width: 0%;
            transition: width 0.3s ease;
            border-radius: 10px;
        }

        .progress-text {
            text-align: center;
            margin-top: 10px;
            color: #aaa;
            font-size: 0.9rem;
        }

        /* Result Actions */
        .result-actions {
            display: none;
            gap: 15px;
            margin-top: 20px;
        }

        .result-actions.active {
            display: flex;
        }

        .action-btn {
            flex: 1;
            padding: 12px 20px;
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .download-btn {
            background: linear-gradient(90deg, #00d9ff, #00ff88);
            color: #fff;
        }

        .reset-btn {
            background: rgba(255, 255, 255, 0.1);
            color: #fff;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .action-btn:hover {
            transform: translateY(-2px);
        }

        /* Features Section */
        .features {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
            margin-top: 50px;
        }

        @media (max-width: 768px) {
            .features {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        .feature-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 25px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
        }

        .feature-card:hover {
            transform: translateY(-5px);
            border-color: rgba(0, 217, 255, 0.3);
        }

        .feature-icon {
            font-size: 2.5rem;
            margin-bottom: 15px;
        }

        .feature-title {
            font-size: 1rem;
            margin-bottom: 8px;
            color: #00d9ff;
        }

        .feature-desc {
            font-size: 0.85rem;
            color: #888;
        }

        /* Footer */
        footer {
            text-align: center;
            padding: 40px 0;
            color: #666;
            font-size: 0.9rem;
        }

        footer a {
            color: #00d9ff;
            text-decoration: none;
        }

        /* Loading Animation */
        .loading-spinner {
            display: none;
            width: 60px;
            height: 60px;
            border: 4px solid rgba(0, 217, 255, 0.2);
            border-top-color: #00d9ff;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        .loading-spinner.active {
            display: block;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* 3D Canvas placeholder */
        #meshCanvas {
            width: 100%;
            height: 100%;
            display: none;
        }

        #meshCanvas.active {
            display: block;
        }

        /* Status Messages */
        .status-message {
            padding: 15px;
            border-radius: 10px;
            margin-top: 15px;
            display: none;
        }

        .status-message.active {
            display: block;
        }

        .status-message.success {
            background: rgba(0, 255, 136, 0.1);
            border: 1px solid rgba(0, 255, 136, 0.3);
            color: #00ff88;
        }

        .status-message.error {
            background: rgba(255, 68, 68, 0.1);
            border: 1px solid rgba(255, 68, 68, 0.3);
            color: #ff4444;
        }

        .status-message.info {
            background: rgba(0, 217, 255, 0.1);
            border: 1px solid rgba(0, 217, 255, 0.3);
            color: #00d9ff;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header>
            <h1 class="logo">Meshify3D</h1>
            <p class="tagline">Transform your 2D images into stunning 3D models using AI</p>
        </header>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Upload Section -->
            <div class="upload-section">
                <h2 class="section-title">üì§ Upload Image</h2>
                
                <div class="upload-area" id="uploadArea">
                    <div class="upload-icon">üñºÔ∏è</div>
                    <p class="upload-text">Drag & drop your image here</p>
                    <p class="upload-hint">or click to browse (PNG, JPG, JPEG)</p>
                    <input type="file" id="fileInput" accept="image/png, image/jpeg, image/jpg">
                </div>

                <div class="preview-container" id="previewContainer">
                    <img id="previewImage" class="preview-image" alt="Preview">
                    <div class="file-info">
                        <p>File: <span id="fileName">-</span></p>
                        <p>Size: <span id="fileSize">-</span></p>
                        <p>Dimensions: <span id="fileDimensions">-</span></p>
                    </div>
                </div>

                <button class="generate-btn" id="generateBtn" disabled>
                    üöÄ Generate 3D Mesh
                </button>

                <div class="status-message" id="statusMessage"></div>
            </div>

            <!-- Output Section -->
            <div class="output-section">
                <h2 class="section-title">üé® 3D Output</h2>
                
                <div class="viewer-container" id="viewerContainer">
                    <div class="placeholder-text" id="placeholder">
                        <div class="icon">üîÆ</div>
                        <p>Your 3D model will appear here</p>
                    </div>
                    <div class="loading-spinner" id="loadingSpinner"></div>
                    <canvas id="meshCanvas"></canvas>
                </div>

                <div class="progress-container" id="progressContainer">
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill"></div>
                    </div>
                    <p class="progress-text" id="progressText">Processing...</p>
                </div>

                <div class="result-actions" id="resultActions">
                    <button class="action-btn download-btn" id="downloadBtn">
                        ‚¨áÔ∏è Download OBJ
                    </button>
                    <button class="action-btn reset-btn" id="resetBtn">
                        üîÑ New Image
                    </button>
                </div>
            </div>
        </div>

        <!-- Features Section -->
        <div class="features">
            <div class="feature-card">
                <div class="feature-icon">üß†</div>
                <h3 class="feature-title">Deep Learning</h3>
                <p class="feature-desc">Advanced AI models for accurate 3D reconstruction</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">‚ö°</div>
                <h3 class="feature-title">Fast Processing</h3>
                <p class="feature-desc">Get your 3D model in seconds</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">üéØ</div>
                <h3 class="feature-title">High Quality</h3>
                <p class="feature-desc">Detailed geometry and texture mapping</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">üì¶</div>
                <h3 class="feature-title">Export Ready</h3>
                <p class="feature-desc">Download in popular 3D formats</p>
            </div>
        </div>

        <!-- Footer -->
        <footer>
            <p>¬© 2025 Meshify3D by <a href="https://github.com/Byte-Bonded" target="_blank">Byte-Bonded</a></p>
            <p style="margin-top: 10px;">Powered by Azure Functions</p>
        </footer>
    </div>

    <script>
        // DOM Elements
        const uploadArea = document.getElementById('uploadArea');
        const fileInput = document.getElementById('fileInput');
        const previewContainer = document.getElementById('previewContainer');
        const previewImage = document.getElementById('previewImage');
        const fileName = document.getElementById('fileName');
        const fileSize = document.getElementById('fileSize');
        const fileDimensions = document.getElementById('fileDimensions');
        const generateBtn = document.getElementById('generateBtn');
        const progressContainer = document.getElementById('progressContainer');
        const progressFill = document.getElementById('progressFill');
        const progressText = document.getElementById('progressText');
        const placeholder = document.getElementById('placeholder');
        const loadingSpinner = document.getElementById('loadingSpinner');
        const meshCanvas = document.getElementById('meshCanvas');
        const resultActions = document.getElementById('resultActions');
        const downloadBtn = document.getElementById('downloadBtn');
        const resetBtn = document.getElementById('resetBtn');
        const statusMessage = document.getElementById('statusMessage');

        let selectedFile = null;

        // Upload Area Click
        uploadArea.addEventListener('click', () => fileInput.click());

        // File Input Change
        fileInput.addEventListener('change', handleFileSelect);

        // Drag and Drop
        uploadArea.addEventListener('dragover', (e) => {
            e.preventDefault();
            uploadArea.classList.add('dragover');
        });

        uploadArea.addEventListener('dragleave', () => {
            uploadArea.classList.remove('dragover');
        });

        uploadArea.addEventListener('drop', (e) => {
            e.preventDefault();
            uploadArea.classList.remove('dragover');
            const files = e.dataTransfer.files;
            if (files.length > 0) {
                handleFile(files[0]);
            }
        });

        // Handle File Selection
        function handleFileSelect(e) {
            const file = e.target.files[0];
            if (file) {
                handleFile(file);
            }
        }

        function handleFile(file) {
            // Validate file type
            const validTypes = ['image/png', 'image/jpeg', 'image/jpg'];
            if (!validTypes.includes(file.type)) {
                showStatus('Please upload a PNG or JPG image.', 'error');
                return;
            }

            // Validate file size (max 10MB)
            if (file.size > 10 * 1024 * 1024) {
                showStatus('File size must be less than 10MB.', 'error');
                return;
            }

            selectedFile = file;

            // Show preview
            const reader = new FileReader();
            reader.onload = (e) => {
                previewImage.src = e.target.result;
                
                // Get image dimensions
                const img = new Image();
                img.onload = () => {
                    fileDimensions.textContent = `${img.width} x ${img.height}px`;
                };
                img.src = e.target.result;
            };
            reader.readAsDataURL(file);

            // Update file info
            fileName.textContent = file.name;
            fileSize.textContent = formatFileSize(file.size);

            // Show preview container
            previewContainer.classList.add('active');
            generateBtn.disabled = false;

            showStatus('Image loaded successfully! Click "Generate 3D Mesh" to continue.', 'success');
        }

        // Format file size
        function formatFileSize(bytes) {
            if (bytes < 1024) return bytes + ' B';
            if (bytes < 1024 * 1024) return (bytes / 1024).toFixed(1) + ' KB';
            return (bytes / (1024 * 1024)).toFixed(1) + ' MB';
        }

        // Show status message
        function showStatus(message, type) {
            statusMessage.textContent = message;
            statusMessage.className = 'status-message active ' + type;
        }

        // Generate Button Click
        generateBtn.addEventListener('click', async () => {
            if (!selectedFile) return;

            // Start processing
            generateBtn.disabled = true;
            placeholder.style.display = 'none';
            loadingSpinner.classList.add('active');
            progressContainer.classList.add('active');
            statusMessage.classList.remove('active');

            // Simulate processing (replace with actual API call)
            await simulateProcessing();

            // Processing complete
            loadingSpinner.classList.remove('active');
            progressContainer.classList.remove('active');
            resultActions.classList.add('active');
            
            // Show 3D canvas (placeholder for actual 3D rendering)
            meshCanvas.classList.add('active');
            draw3DPlaceholder();

            showStatus('3D mesh generated successfully!', 'success');
        });

        // Simulate processing with progress
        async function simulateProcessing() {
            const steps = [
                { progress: 10, text: 'Analyzing image...' },
                { progress: 25, text: 'Extracting features...' },
                { progress: 40, text: 'Estimating depth...' },
                { progress: 55, text: 'Generating point cloud...' },
                { progress: 70, text: 'Creating mesh...' },
                { progress: 85, text: 'Applying textures...' },
                { progress: 95, text: 'Finalizing model...' },
                { progress: 100, text: 'Complete!' }
            ];

            for (const step of steps) {
                progressFill.style.width = step.progress + '%';
                progressText.textContent = step.text;
                await sleep(500 + Math.random() * 500);
            }
        }

        function sleep(ms) {
            return new Promise(resolve => setTimeout(resolve, ms));
        }

        // Draw 3D placeholder on canvas
        function draw3DPlaceholder() {
            const canvas = meshCanvas;
            const ctx = canvas.getContext('2d');
            
            // Set canvas size
            canvas.width = canvas.parentElement.clientWidth;
            canvas.height = canvas.parentElement.clientHeight;

            // Draw background
            ctx.fillStyle = '#1a1a2e';
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            // Draw a simple 3D-like cube representation
            const centerX = canvas.width / 2;
            const centerY = canvas.height / 2;
            const size = 100;

            // Cube faces
            ctx.strokeStyle = '#00d9ff';
            ctx.lineWidth = 2;

            // Front face
            ctx.beginPath();
            ctx.moveTo(centerX - size, centerY - size);
            ctx.lineTo(centerX + size, centerY - size);
            ctx.lineTo(centerX + size, centerY + size);
            ctx.lineTo(centerX - size, centerY + size);
            ctx.closePath();
            ctx.stroke();

            // Back face (offset)
            const offset = 50;
            ctx.strokeStyle = '#00ff88';
            ctx.beginPath();
            ctx.moveTo(centerX - size + offset, centerY - size - offset);
            ctx.lineTo(centerX + size + offset, centerY - size - offset);
            ctx.lineTo(centerX + size + offset, centerY + size - offset);
            ctx.lineTo(centerX - size + offset, centerY + size - offset);
            ctx.closePath();
            ctx.stroke();

            // Connecting lines
            ctx.strokeStyle = '#888';
            ctx.beginPath();
            ctx.moveTo(centerX - size, centerY - size);
            ctx.lineTo(centerX - size + offset, centerY - size - offset);
            ctx.moveTo(centerX + size, centerY - size);
            ctx.lineTo(centerX + size + offset, centerY - size - offset);
            ctx.moveTo(centerX + size, centerY + size);
            ctx.lineTo(centerX + size + offset, centerY + size - offset);
            ctx.moveTo(centerX - size, centerY + size);
            ctx.lineTo(centerX - size + offset, centerY + size - offset);
            ctx.stroke();

            // Add text
            ctx.fillStyle = '#fff';
            ctx.font = '16px Segoe UI';
            ctx.textAlign = 'center';
            ctx.fillText('3D Mesh Preview', centerX, centerY + size + 60);
            ctx.fillStyle = '#888';
            ctx.font = '12px Segoe UI';
            ctx.fillText('(Actual 3D model would render here with Three.js)', centerX, centerY + size + 85);
        }

        // Download Button
        downloadBtn.addEventListener('click', () => {
            showStatus('Download started! (Demo mode - actual download requires backend integration)', 'info');
            
            // In production, this would trigger actual file download
            // For demo, we'll create a simple OBJ placeholder
            const objContent = `# Meshify3D Generated Model
# Generated from: ${selectedFile ? selectedFile.name : 'image.jpg'}
# Date: ${new Date().toISOString()}

# Vertices
v 0 0 0
v 1 0 0
v 1 1 0
v 0 1 0
v 0 0 1
v 1 0 1
v 1 1 1
v 0 1 1

# Faces
f 1 2 3 4
f 5 6 7 8
f 1 2 6 5
f 2 3 7 6
f 3 4 8 7
f 4 1 5 8
`;
            
            const blob = new Blob([objContent], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'meshify3d_model.obj';
            a.click();
            URL.revokeObjectURL(url);
        });

        // Reset Button
        resetBtn.addEventListener('click', () => {
            // Reset everything
            selectedFile = null;
            fileInput.value = '';
            previewContainer.classList.remove('active');
            generateBtn.disabled = true;
            resultActions.classList.remove('active');
            meshCanvas.classList.remove('active');
            placeholder.style.display = 'block';
            statusMessage.classList.remove('active');
            progressFill.style.width = '0%';
        });

        // Handle window resize for canvas
        window.addEventListener('resize', () => {
            if (meshCanvas.classList.contains('active')) {
                draw3DPlaceholder();
            }
        });
    </script>
</body>
</html>
